### 5.1 소트 연산에 대한 이해

- 소트 수행 과정
  - 소트는 기본적으로 PGA의 소트 영역 + TEMP에서 진행
  - 메모리 소트 : 전체 데이터의 정렬 작업을 메모리 내에서 완료하는 것 Internal Sort
  - 디스크 소트 : 디스크 공간까지 사용하는 경우 External Sort
- 소트 연산은 메모리 집약적, CPU 집약적 => 만약 디스크 소트까지 발생하면 성능이 매우 나빠짐
- 부분범위 처리를 불가능하게 하여, OLTP에서 성능 저하 유발
- 따라서, 될 수 있으면 소트가 발생하지 않게 SQL 작성

<br>

- **Sort Aggregate**
  - **전체 로우를 대상**으로 집계 수행 SUM, MIN, MAX, COUNT
  - 실제로 데이터를 정렬하진 않음, Sort Area를 사용
 
<br>

- **Sort Order By**
  - 데이터 정렬
 
<br>

- **Sort Group By**
  - 소팅 알고리즘으로 그룹별 집계 수행
  - Sort Aggregate와 같은 방식, 정렬이 아닌 순차적으로 스캔하여 분류하는 방식 사용
  - 집계할 대상 레코드가 아무리 많아도 temp까지 쓰지 않음(Sort Area가 작아도 된다)
  - 정렬된 그룹핑 결과를 얻고자 하면, 실행계획에 'Sort group By'라고 표시되어있어도 반드시 Order By를 명시해야 함
- **Hash Group By**
  - 오라클 10gR2 버전에서 도입
  - Group By 절 뒤에 Order By 절을 명시하지 않으면, 대부분 Hash Group By 방식으로 처리
  - 해싱 알고리즘 사용
 

<br>

- **Sort Unique**
  - 중복 레코드를 제거
  -  사용 경우 : Union, Minus, Intersect 같은 집합(set) 연산자 / Distinct 연산자
- **Hash Unique**
  - 오라클 10gR2 버전에서 도입
  - Distinct + (Order By 생략) 시 사용
<br>

- **Sort Join**
  - 소트 머지 조인 수행 시 등장

<br>

- **Window Sort**
  - 윈도우 함수(분석함수) 수행할 때 등장 




----
### 헷갈리는 내용
- M쪽 집합, 1쪽 집합?
  - M쪽 집합 정의 : 서브쿼리 내에서 조인 키(Join Key)가 유니크하지 않아 여러 행(Row)이 나올 수 있는 집합
  - M쪽 집합(다수, Nonunique)은 Unnesting 시 1쪽 집합(고유)으로 변환하기 위해 SORT UNIQUE 연산이 필요한 테이블을 의미
 


























