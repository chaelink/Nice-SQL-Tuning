### 5.3 인덱스를 이용한 소트 연산 생략

- Top N 쿼리
  - 3-Tier 환경에서 부분범위 처리를 가능하게 하는 방법
  - 전체 결과 집합 중 상위 N개 레코드만 선택하는 쿼리
  - 실행 계획 : COUNT (STOPKEY) => "Top N STOPKEY 알고리즘"

<br>

- 페이징 처리
  - ROWNUM으로 지정한 건수만큼 결과 레코드를 얻으면 바로 정지

 <br>
 
- 3-Tier 환경에서 부분범위 처리 활용을 위해 해야할 일
  - 부분범위 처리 가능하게 sql 작성
    - 인덱스 사용 가능하도록 조건절 구사
    - 조인은 NL 조인 위주로 처리
    - Order by 절이 있어도 소트 연산 생략 가능하게 작성
  - 작성한 sql문을 표준 패턴 바디에 입력

 <br>

- 페이징 처리 안티 패턴
  - ROWNUM이 불편해 보인다고 삭제하면, Top N STOPKEY 알고리즘이 아니게 됨 -> 전체범위로 처리됨
 
 <br>

- 최대값/최소값
  - 인덱스는 정렬되어 있으므로, 이를 활용하면 전체 데이터를 읽지 않고 최소/최대 구하기 가능(오라클 8i부터)
    - 조건 : 조건절 컬러과 min/max 함수 인자값이 모두 인덱스에 포함되어 있어야 함
    - First Row Stopkey : 조건을 만족하는 레코드 하나를 찾았을 때 바로 멈춤
    - Top N STOPKEY 알고리즘 : ROWNUM<=1 로 쉽게 구하기 가능, 모든 컬럼이 인덱스에 포함되어 있지 않아도 가능

 <br>

- 이력 조회

 <br>

- 인덱스를 활용한 그룹핑 연산 생략
  - group by 컬럼이 선두 컬럼인 인덱스를 사용하면 가능
  - 부분범위 처리 가능 
  - 실행계획 : Sort Group By Nosort 



 

----
### 헷갈리는 내용

- 그러면 3-Tier 환경에서는 Top N 쿼리, 페이징 처리 두 가지 방법이 있는 것?













